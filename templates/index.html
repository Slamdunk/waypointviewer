{% if wpt %}
<html>
	<head>
		<link href="static/waypointviewer.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?libraries=geometry&sensor=false"></script>
		<script type="text/javascript" src="static/richmarker-compiled.js"></script>
		<script type="text/javascript" src="waypointviewer.js?kml={{ kml|urlencode }}&tsk={{ tsk|urlencode }}&wpt={{ wpt|urlencode }}"></script>
		<title>{% if title %}{{ title|escape }} - {% endif %}Waypoint Viewer</title>
	</head>
	<body>
		<div id="map" style="width: 100%; height: 100%">Loading...</div>
		<div id="fullScreen" class="buttonOuter" style="display: none; margin: 5px;" title="Show full screen">
			<div class="buttonInner">
				<img src="static/fullscreen.png" height="13" width="13"/>
			</div>
		</div>
		<div id="taskBoardButton" class="buttonOuter" style="display: none; margin: 5px;" title="Show task board">
			<div class="buttonInner">
				<img src="static/taskboard.png" height="13" width="13"/>
			</div>
		</div>
		<div id="richMarker" class="richMarker" style="display: none">
			<span id="label"></span>
		</div>
		<div id="infoWindow" class="infoWindow" style="display: none">
			<table>
				<tr>
					<th>ID:</th>
					<td><span id="id"></span></td>
				</tr>
				<tr>
					<th>Description:</th>
					<td><span id="description"></span></td>
				</tr>
				<tr>
					<th>Latitude:</th>
					<td><span id="lat"></span>&deg;</td>
				</tr>
				<tr>
					<th>Longitude:</th>
					<td><span id="lng"></span>&deg;</td>
				</tr>
				<tr>
					<th>Elevation:</th>
					<td><span id="elevation"></span>m</td>
				</tr>
				<tr>
					<th>Radius:</th>
					<td><span id="radius"></span>m</td>
				</tr>
			</table>
		</div>
		<div id="taskBoard" class="taskBoard" style="display: none">
			<table>
				<tbody>
	{% if title %}
					<tr>
						<td colspan="5">{{ title|escape }}</td>
					</tr>
	{% endif %}
					<tr>
						<th>Task Type:</th>
						<td id="type"></td>
					</tr>
					<tr>
						<th>Window Open:</th>
						<td id="wo"></td>
						<th>Window Close:</th>
						<td id="wc"></td>
					</tr>
					<tr>
						<th>Start:</th>
						<td id="so"></td>
						<th>Task Deadline:</th>
						<td id="tc"></td>
					</tr>
					<tr>
						<th>Point</th>
						<th>Name</th>
						<th>Description</th>
						<th>Radius</th>
						<th>Distance</th>
					</tr>
					<tr id="turnpointRow" style="display: none;">
						<td><span id="turnpointIndex"></span></td>
						<td><span id="turnpointId"></span></td>
						<td><span id="turnpointDescription"></span></td>
						<td><span id="turnpointRadius"></span></td>
						<td><span id="turnpointDistance"></span></td>
					</tr>
					<tr>
						<th>GPS Distance:</th>
						<td><span id="distance"></span></td>
						<th>Task Distance:</th>
						<td><span id="shortestDistance"></span></td>
					</tr>
				</tbody>
			</table>
		</div>
	</body>
</html>
{% else %}
<html>
	<head>
		<title>Waypoint Viewer</title>
	</head>
	<body>
		<h1>Waypoint Viewer</h1>
		<hr/>
		<p>Create your waypoint map now:</p>
		<form action="/" method="get">
			<ol>
				<li>
					(Required) Link to waypoint file hosted on your webserver:<br/>
					<input name="wpt" size="80" type="text" value="{{ wpt|escape }}"/><br/>
					Example: <i>http://www.slovenia-pgopen.com/downloads/Kobarid_Lijak.wpt</i><br/>
					CompeGPS, FormatGEO, OziExplorer and SeeYou formats supported
				</li>
				<li>
					(Optional) Title:<br/>
					<input name="title" size="80" type="text" value="{{ title|escape }}"/><br/>
					Example: <i>British Open Slovenia 2010</i>
				</li>
				<li>
					(Optional) Link to KML overlay hosted on your webserver:<br/>
					<input name="kml" size="80" type="text" value="{{ kml|escape }}"/>
				</li>
				<li>
					(Optional) Task description:<br/>
					<input name="tsk" size="80" type="text" value="{{ tsk|escape }}"/>
				</li>
				<li>
					<input type="submit" value="Go"/>
				</li>
			</ol>
		</form>
		<hr/>
		<p><a href="http://github.com/twpayne/waypointviewer">http://github.com/twpayne/waypointviewer</a></p>
	</body>
</html>
{% endif %}
