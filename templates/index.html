{% if wpt %}
<html>
	<head>
		<link href="static/waypointviewer.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript" src="static/richmarker-compiled.js"></script>
		<script type="text/javascript" src="waypointviewer.js?kml={{ kml|urlencode }}&wpt={{ wpt|urlencode }}"></script>
		<title>{% if title %}{{ title|escape }} - {% endif %}Waypoint Viewer</title>
	</head>
	<body>
		<div id="map" style="width: 100%; height: 100%">Loading...</div>
		<div id="richMarker" class="richMarker" style="display: none">
			<span id="label"></span>
		</div>
		<div id="infoWindow" class="infoWindow" style="display: none">
			<table>
				<tr>
					<th>ID:</th>
					<td><span id="id"></span></td>
				</tr>
				<tr>
					<th>Description:</th>
					<td><span id="description"></span></td>
				</tr>
				<tr>
					<th>Latitude:</th>
					<td><span id="lat"></span>&deg;</td>
				</tr>
				<tr>
					<th>Longitude:</th>
					<td><span id="lng"></span>&deg;</td>
				</tr>
				<tr>
					<th>Elevation:</th>
					<td><span id="elevation"></span>m</td>
				</tr>
				<tr>
					<th>Radius:</th>
					<td><span id="radius"></span>m</td>
				</tr>
			</table>
		</div>
	</body>
</html>
{% else %}
<html>
	<head>
		<title>Waypoint Viewer</title>
	</head>
	<body>
		<h1>Waypoint Viewer</h1>
		<hr/>
		<p>Create your waypoint map now:</p>
		<form action="/" method="get">
			<table>
				<tr>
					<td rowspan="3" valign="top"><font size="+3"><b>1</b></font></td>
					<td>(Required) Link to waypoint file hosted on your webserver:</td>
				</tr>
				<tr>
					<td><input name="wpt" size="80" type="text" value="{{ wpt|escape }}"/></td>
				</tr>
				<tr>
					<td><font size="-1">Example: <i>http://www.slovenia-pgopen.com/downloads/Kobarid_Lijak.wpt</i><br/>CompeGPS, FormatGEO, OziExplorer and SeeYou formats supported</font></td>
				</tr>
				<tr>
					<td rowspan="3" valign="top"><font size="+3"><b>2</b></font></td>
					<td>(Optional) Title:</td>
				</tr>
				<tr>
					<td><input name="title" size="80" type="text" value="{{ title|escape }}"/><br/><font size="-1"></font></td></td>
				</tr>
				<tr>
					<td><font size="-1">Example: <i>British Open Slovenia 2010</i></font></td>
				</tr>
				<tr>
					<td rowspan="2" valign="top"><font size="+3"><b>3</b></font></td>
					<td>Link to KML overlay hosted on your webserver:</td>
				</tr>
				<tr>
					<td><input name="kml" size="80" type="text" value="{{ kml|escape }}"/></td>
				</tr>
				<tr>
					<td valign="top"><font size="+3"><b>4</b></font></td>
					<td><input type="submit" value="Go"/></td>
				</tr>
			</table>
		</form>
		<hr/>
		<p><a href="http://github.com/twpayne/waypointviewer">http://github.com/twpayne/waypointviewer</a></p>
	</body>
</html>
{% endif %}
